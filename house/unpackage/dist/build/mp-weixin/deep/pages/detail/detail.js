require('../../common/runtime.js');require('../../common/vendor.js');require('../../common/main.js');(global["webpackJsonp_deep"]=global["webpackJsonp_deep"]||[]).push([["pages/detail/detail"],{"0612":function(e,t,n){"use strict";(function(e){var u=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("5abe")),o={data:function(){return{room:{villageName:"",houseNum:"",houseHall:"",toiletNum:"",roomType:"",direction:"",price:"",introduce:"",heart:!1},village:{year:"",type:"",green:""},swiperlist:[],tagList:[],user:{},longitude:120.14,latitude:30.35,distance:0}},onLoad:function(e){var t=e.houseId;this.findHouseById(t)},methods:{heartHouse:function(){var t=this,n=e.getStorageSync("lifeData"),u=n.vuex_user;if(!u)return e.reLaunch({url:"../login/wxlogin"});this.$u.post("api/houseApi/saveHeart",{heart:this.room.heart,houseId:this.room.id,userId:u.id}).then((function(e){t.room.heart=!t.room.heart,t.$mytip.toast(e.msg)}))},goHome:function(){e.reLaunch({url:"../index/index"})},clickItem:function(){e.makePhoneCall({phoneNumber:this.room.agentPhone})},findHouseById:function(t){var n=this;this.$u.get("api/houseApi/findHouseById",{id:t}).then((function(u){var o=u.data;0==o.type?o.type="整租":1==o.type&&(o.type="合租"),1==o.roomType?o.roomType="主卧":2==o.roomType?o.roomType="次卧":o.roomType="未知",n.$u.test.isEmpty(o.houseNum)&&(o.houseNum=""),n.$u.test.isEmpty(o.houseHall)&&(o.houseHall=""),n.$u.test.isEmpty(o.toiletNum)&&(o.toiletNum=""),n.$u.test.isEmpty(o.floor)?o.floor="":o.floor=o.floor+"层",n.swiperlist=o.imageList.map((function(e){var t=e.imgUrl;return t=t.includes(i.default.staticUrl)?e.imgUrl:i.default.staticUrl+e.imagePath,{title:e.imageName,image:t}})),n.tagList=o.featureList.map((function(e){return{title:e.feature}})),o.agentAvatar.includes(i.default.staticUrl)||(o.agentAvatar=i.default.staticUrl+o.agentAvatar),n.user=o.user,n.village=o.village,n.room=o,n.selectHouseHeart(t);var a="";a="整租"==o.type?n.village.name+" "+n.room.houseNum+n.room.houseHall+n.room.toiletNum+" "+n.room.decoration+" ¥"+n.room.price+"/月":n.village.name+" "+o.roomType+" "+n.room.decoration+" ¥"+n.room.price+"/月",n.$u.mpShare={title:a,imageUrl:n.room.faceUrl};var r=e.getStorageSync("houseHistory");r||(r=[]),r.length>=20&&r.pop(),r.push(n.room);var c=[];r.forEach((function(e,t){c.push(e.code)}));var l=[],s=new Set(c);s.forEach((function(e){var t=c.findIndex((function(t){return t===e}));l.push(r[t])})),e.setStorageSync("houseHistory",l),n.longitude=o.longitude,n.latitude=o.latitude;var d=39.909,f=116.39742,m=n.latitude,h=n.longitude;e.getLocation({type:"gcj02",success:function(e){d=e.latitude,f=e.longitude,n.distance=n.getDistance(d,f,m,h)}})}))},selectHouseHeart:function(t){var n=this,u=e.getStorageSync("lifeData"),i=u.vuex_user;if(i){this.$u.get("api/houseApi/selectHouseHeart",{houseId:t,userId:i.id}).then((function(e){n.room.heart=e.data}))}},clickImg:function(t){var n=this.swiperlist.map((function(e){return e.image}));console.log(n),e.previewImage({current:t,urls:n})},clickMap:function(t){e.openLocation({longitude:Number(this.longitude),latitude:Number(this.latitude),name:this.room.villageName,address:this.room.address})},getDistance:function(e,t,n,u){e=e||0,t=t||0,n=n||0,u=u||0;var i=e*Math.PI/180,o=n*Math.PI/180,a=i-o,r=t*Math.PI/180-u*Math.PI/180,c=12756274*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(r/2),2)));return(c/1e3).toFixed(2)}}};t.default=o}).call(this,n("543d")["default"])},2469:function(e,t,n){"use strict";n.r(t);var u=n("0612"),i=n.n(u);for(var o in u)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(o);t["default"]=i.a},3175:function(e,t,n){"use strict";var u=n("ea92"),i=n.n(u);i.a},a5b0:function(e,t,n){"use strict";var u=n("bcf7"),i=n.n(u);i.a},b509:function(e,t,n){"use strict";n.r(t);var u=n("bea2"),i=n("2469");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("3175"),n("a5b0");var a=n("f0c5"),r=Object(a["a"])(i["default"],u["b"],u["c"],!1,null,"2b0233db",null,!1,u["a"],void 0);t["default"]=r.exports},bcf7:function(e,t,n){},bea2:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u}));var u={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"bd84"))},uSwiper:function(){return n.e("uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"e9ab"))},uCellGroup:function(){return n.e("uview-ui/components/u-cell-group/u-cell-group").then(n.bind(null,"e49c"))},uCellItem:function(){return n.e("uview-ui/components/u-cell-item/u-cell-item").then(n.bind(null,"b61c"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"33bb"))},uCard:function(){return n.e("uview-ui/components/u-card/u-card").then(n.bind(null,"294a"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"ab9b"))},uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"8b71"))},uDivider:function(){return n.e("uview-ui/components/u-divider/u-divider").then(n.bind(null,"7452"))}},i=function(){var e=this.$createElement;this._self._c},o=[]},ea92:function(e,t,n){},f7f9:function(e,t,n){"use strict";(function(e,t){var u=n("4ea4");n("7cc8"),n("5c17");u(n("66fd"));var i=u(n("b509"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["f7f9","common/runtime","common/vendor"]]]);