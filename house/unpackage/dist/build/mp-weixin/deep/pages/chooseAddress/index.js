require('../../common/runtime.js');require('../../common/vendor.js');require('../../common/main.js');(global["webpackJsonp_deep"]=global["webpackJsonp_deep"]||[]).push([["pages/chooseAddress/index"],{"1d5a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement;this._self._c},s=[]},"4eeb":function(t,e,i){"use strict";var n=i("7f86"),s=i.n(n);s.a},"5f57":function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("7cc8"),i("5c17");n(i("66fd"));var s=n(i("895e"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"64d1":function(t,e,i){},"7f86":function(t,e,i){},"895e":function(t,e,i){"use strict";i.r(e);var n=i("1d5a"),s=i("8b9f");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(o);i("4eeb"),i("ea9f");var a=i("f0c5"),d=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"9baa2022",null,!1,n["a"],void 0);e["default"]=d.exports},"8b9f":function(t,e,i){"use strict";i.r(e);var n=i("8bd9"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=s.a},"8bd9":function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("2eee")),o=n(i("c973")),a=i("70d1"),d=new a({key:"FALBZ-J2G3I-ZY5GX-5ATUZ-GHOOZ-YVFAR"}),c=null,u={data:function(){return{curCity:"",mapStatus:1,map:{longitude:116.39742,latitude:39.909},room:"",list:[],checked:0,tempAddress:null}},computed:{currentAddress:function(){return 0===this.list.length?{}:this.list[this.checked]}},created:function(){c=t.createMapContext("map")},onNavigationBarButtonTap:function(){this.submit()},onLoad:function(t){var e=this;return(0,o.default)(s.default.mark((function i(){var n,o,a,d;return s.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t.data,!n){i.next=8;break}e.tempAddress=JSON.parse(n),e.room=e.tempAddress.room,o=e.tempAddress.location.lng,a=e.tempAddress.location.lat,i.next=13;break;case 8:return i.next=10,e.getLocation();case 10:d=i.sent,o=+d.longitude,a=+d.latitude;case 13:e.map={longitude:o,latitude:a},e.position={longitude:o,latitude:a},e.getAddressList(1);case 16:case"end":return i.stop()}}),i)})))()},methods:{submit:function(){var e=this.currentAddress,i=(this.room,e.ad_info,e.address),n=e.location;e.title;t.$emit("changeAddressConfig",i,n.lng,n.lat),t.navigateBack()},getAddressList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;1!==this.isSetTempAddress&&d.reverseGeocoder({location:{latitude:this.position.latitude,longitude:this.position.longitude},get_poi:1,poi_options:"page_size=30;page_index=1",success:function(i){if(i.result.pois.forEach((function(t){t.ad_info||(t.ad_info={adcode:t.adcode,city:t.city,district:t.district,province:t.province})})),t.tempAddress&&(t.tempAddress.title!=i.result.pois[0].title&&(t.tempAddress.ad_info||(t.tempAddress.ad_info={adcode:t.tempAddress.adcode,city:t.tempAddress.city,district:t.tempAddress.district,province:t.tempAddress.province}),i.result.pois.unshift(t.tempAddress)),t.tempAddress=null,t.isSetTempAddress=1,setTimeout((function(){t.isSetTempAddress=0}),500)),e){var n=i.result.pois[0].ad_info;t.curCity=n.city||"",i.result.pois[0].select=1,t.list=i.result.pois,t.checked=0}else t.list=i.result.pois},fail:function(t){console.log(t)}})},onRegionchange:function(t){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){"end"!==t.type&&"regionchange"!==t.type||c.getCenterLocation({success:function(t){e.position={latitude:t.latitude,longitude:t.longitude},1==e.mapStatus&&e.getAddressList(1)},fail:function(t){console.log(t)}})}),200)},chooseAddress:function(t){var e=this,i=this.list;this.map={longitude:i[t].location.lng,latitude:i[t].location.lat},this.checked=t,this.mapStatus=0,clearTimeout(this.mapStatusTimer),this.mapStatusTimer=setTimeout((function(){e.mapStatus=1}),1e3)},getLocation:function(){return new Promise((function(e){t.getLocation({type:"gcj02",success:function(t){e({longitude:t.longitude,latitude:t.latitude})},err:function(t){console.log(t),e({longitude:116.39742,latitude:39.909})},complete:function(t){console.log(t)}})}))},navTo:function(e){t.navigateTo({url:e})}}};e.default=u}).call(this,i("543d")["default"])},ea9f:function(t,e,i){"use strict";var n=i("64d1"),s=i.n(n);s.a}},[["5f57","common/runtime","common/vendor"]]]);