{"remainingRequest":"C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\node_modules\\.store\\eslint-loader@2.2.1\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\src\\store\\modules\\user.js","mtime":1682844148000},{"path":"C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\babel.config.js","mtime":1682793230000},{"path":"C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\xubo\\Desktop\\房屋租赁项目\\house-admin\\node_modules\\.store\\eslint-loader@2.2.1\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luLCBxckNvZGVMb2dpbiBhcyBfcXJDb2RlTG9naW4sIGxvZ291dCwgZ2V0SW5mbyB9IGZyb20gIkAvYXBpL2xvZ2luIjsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7CnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICB0b2tlbjogZ2V0VG9rZW4oKSwKICAgIG5hbWU6ICIiLAogICAgYXZhdGFyOiAiIiwKICAgIHJvbGVzOiBbXSwKICAgIHBlcm1pc3Npb25zOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgICB9LAogICAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICAgIH0sCiAgICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgICAgc3RhdGUucm9sZXMgPSByb2xlczsKICAgIH0sCiAgICBTRVRfUEVSTUlTU0lPTlM6IGZ1bmN0aW9uIFNFVF9QRVJNSVNTSU9OUyhzdGF0ZSwgcGVybWlzc2lvbnMpIHsKICAgICAgc3RhdGUucGVybWlzc2lvbnMgPSBwZXJtaXNzaW9uczsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8vIOeZu+W9lQogICAgTG9naW46IGZ1bmN0aW9uIExvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUudHJpbSgpOwogICAgICB2YXIgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgICAgdmFyIGNvZGUgPSB1c2VySW5mby5jb2RlOwogICAgICB2YXIgdXVpZCA9IHVzZXJJbmZvLnV1aWQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCBjb2RlLCB1dWlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIHNldFRva2VuKHJlcy50b2tlbik7CiAgICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsIHJlcy50b2tlbik7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkuoznu7TnoIHnmbvlvZUKICAgIHFyQ29kZUxvZ2luOiBmdW5jdGlvbiBxckNvZGVMb2dpbihfcmVmMiwgdXNlckluZm8pIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgLy8g5YWs5LyX5Y+35L2T6aqM55So5oi3CiAgICAgIHZhciB1c2VybmFtZSA9ICIxODc1ODI2ODE4MSI7CiAgICAgIHZhciBwYXNzd29yZCA9ICIxMjM0NTYiOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF9xckNvZGVMb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgc2V0VG9rZW4ocmVzLnRva2VuKTsKICAgICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgcmVzLnRva2VuKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlueUqOaIt+S/oeaBrwogICAgR2V0SW5mbzogZnVuY3Rpb24gR2V0SW5mbyhfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZ2V0SW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIHVzZXIgPSByZXMudXNlcjsKICAgICAgICAgIHZhciBhdmF0YXIgPSB1c2VyLmF2YXRhciA9PSAiIiA/IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9wcm9maWxlLmpwZyIpIDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArIHVzZXIuYXZhdGFyOwogICAgICAgICAgaWYgKHJlcy5yb2xlcyAmJiByZXMucm9sZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAvLyDpqozor4Hov5Tlm57nmoRyb2xlc+aYr+WQpuaYr+S4gOS4qumdnuepuuaVsOe7hAogICAgICAgICAgICBjb21taXQoIlNFVF9ST0xFUyIsIHJlcy5yb2xlcyk7CiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1BFUk1JU1NJT05TIiwgcmVzLnBlcm1pc3Npb25zKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbW1pdCgiU0VUX1JPTEVTIiwgWyJST0xFX0RFRkFVTFQiXSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb21taXQoIlNFVF9OQU1FIiwgdXNlci51c2VyTmFtZSk7CiAgICAgICAgICBjb21taXQoIlNFVF9BVkFUQVIiLCBhdmF0YXIpOwogICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6YCA5Ye657O757ufCiAgICBMb2dPdXQ6IGZ1bmN0aW9uIExvZ091dChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjQuc3RhdGU7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbW1pdCgiU0VUX1RPS0VOIiwgIiIpOwogICAgICAgICAgY29tbWl0KCJTRVRfUk9MRVMiLCBbXSk7CiAgICAgICAgICBjb21taXQoIlNFVF9QRVJNSVNTSU9OUyIsIFtdKTsKICAgICAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliY3nq68g55m75Ye6CiAgICBGZWRMb2dPdXQ6IGZ1bmN0aW9uIEZlZExvZ091dChfcmVmNSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBjb21taXQoIlNFVF9UT0tFTiIsICIiKTsKICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB1c2VyOw=="},{"version":3,"names":["login","qrCodeLogin","logout","getInfo","getToken","setToken","removeToken","user","state","token","name","avatar","roles","permissions","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_ROLES","SET_PERMISSIONS","actions","Login","_ref","userInfo","commit","username","trim","password","code","uuid","Promise","resolve","reject","then","res","catch","error","_ref2","GetInfo","_ref3","require","process","env","VUE_APP_BASE_API","length","userName","LogOut","_ref4","FedLogOut","_ref5"],"sources":["C:/Users/xubo/Desktop/房屋租赁项目/house-admin/src/store/modules/user.js"],"sourcesContent":["import { login, qrCodeLogin, logout, getInfo } from \"@/api/login\";\nimport { getToken, setToken, removeToken } from \"@/utils/auth\";\n\nconst user = {\n  state: {\n    token: getToken(),\n    name: \"\",\n    avatar: \"\",\n    roles: [],\n    permissions: [],\n  },\n\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      state.token = token;\n    },\n    SET_NAME: (state, name) => {\n      state.name = name;\n    },\n    SET_AVATAR: (state, avatar) => {\n      state.avatar = avatar;\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles;\n    },\n    SET_PERMISSIONS: (state, permissions) => {\n      state.permissions = permissions;\n    },\n  },\n\n  actions: {\n    // 登录\n    Login({ commit }, userInfo) {\n      const username = userInfo.username.trim();\n      const password = userInfo.password;\n      const code = userInfo.code;\n      const uuid = userInfo.uuid;\n      return new Promise((resolve, reject) => {\n        login(username, password, code, uuid)\n          .then((res) => {\n            setToken(res.token);\n            commit(\"SET_TOKEN\", res.token);\n            resolve();\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    },\n\n    // 二维码登录\n    qrCodeLogin({ commit }, userInfo) {\n      // 公众号体验用户\n      const username = \"18758268181\";\n      const password = \"123456\";\n      return new Promise((resolve, reject) => {\n        qrCodeLogin(username, password)\n          .then((res) => {\n            setToken(res.token);\n            commit(\"SET_TOKEN\", res.token);\n            resolve();\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    },\n\n    // 获取用户信息\n    GetInfo({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        getInfo()\n          .then((res) => {\n            const user = res.user;\n            const avatar =\n              user.avatar == \"\"\n                ? require(\"@/assets/images/profile.jpg\")\n                : process.env.VUE_APP_BASE_API + user.avatar;\n            if (res.roles && res.roles.length > 0) {\n              // 验证返回的roles是否是一个非空数组\n              commit(\"SET_ROLES\", res.roles);\n              commit(\"SET_PERMISSIONS\", res.permissions);\n            } else {\n              commit(\"SET_ROLES\", [\"ROLE_DEFAULT\"]);\n            }\n            commit(\"SET_NAME\", user.userName);\n            commit(\"SET_AVATAR\", avatar);\n            resolve(res);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    },\n\n    // 退出系统\n    LogOut({ commit, state }) {\n      return new Promise((resolve, reject) => {\n        logout(state.token)\n          .then(() => {\n            commit(\"SET_TOKEN\", \"\");\n            commit(\"SET_ROLES\", []);\n            commit(\"SET_PERMISSIONS\", []);\n            removeToken();\n            resolve();\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    },\n\n    // 前端 登出\n    FedLogOut({ commit }) {\n      return new Promise((resolve) => {\n        commit(\"SET_TOKEN\", \"\");\n        removeToken();\n        resolve();\n      });\n    },\n  },\n};\n\nexport default user;\n"],"mappings":"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"}]}